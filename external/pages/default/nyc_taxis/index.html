<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../assets/favicon.ico">

    <title>Elasticsearch Nightly Benchmarks</title>

    <!-- Bootstrap core CSS -->
    <link href="../assets/css/Supernice.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="../assets/css/navbar-fixed-top.css" rel="stylesheet">
    <link href="../assets/css/charts.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>

    <script type="text/javascript">
var charts = {
  init: function() {
    charts.toggleCompare($("#checkToggleCompare")[0]);
  },

  showResults: function() {
    var annotationSource = false;

    charts.indexingThroughput = chartingLib.renderChart('indexing_throughput', 'Indexing throughput', 'Mean Throughput [docs/s]', 'indexing_throughput_annotations.json');
    charts.totalTimes = chartingLib.renderChart('indexing_total_times', 'Total times', 'Time [min]', 'indexing_total_times_annotations.json');
    charts.segmentMemory = chartingLib.renderChart('segment_total_memory', 'Segment total heap used', 'Heap used [MB]', annotationSource);
    charts.cpuUsage = chartingLib.renderChart('indexing_cpu_usage', 'Indexing CPU usage', 'CPU usage [%]', 'indexing_cpu_usage_annotations.json')
    charts.diskUsage = chartingLib.renderChart('disk_usage', 'Index disk usage', '[GB]', 'disk_usage_annotations.json'),
    charts.segmentCounts = chartingLib.renderChart('segment_counts', 'Index segment counts', 'Segment count', 'segment_counts_annotations.json'),
    charts.queryLatency = chartingLib.renderChart('search_latency_queries', 'Search Latency', '99th Percentile Latency [ms]', 'search_latency_queries_annotations.json'),
    charts.gcTimes = chartingLib.renderChart('gc_times', 'GC times', 'Total GC runtime [s]', 'gc_times_annotations.json')

    chartingLib.synchronize([
      charts.indexingThroughput,
      charts.totalTimes,
      charts.segmentMemory,
      charts.cpuUsage,
      charts.diskUsage,
      charts.segmentCounts,
      charts.queryLatency,
      charts.gcTimes
    ]);
  },

  compare: function() {
    // workaround for a deficiency in dygraphs bar charts and CSV data sources
    var versions = ["1.7.6", "2.4.3", "5.4.0", "master", "Docker 5.4.0"];

    charts.indexingThroughput = chartingLib.renderBarChart('indexing_throughput', 'Indexing throughput', 'Mean Throughput [docs/s]', versions);
    charts.totalTimes = chartingLib.renderBarChart('indexing_total_times', 'Total times', 'Time [min]', versions);
    charts.segmentMemory = chartingLib.renderBarChart('segment_total_memory', 'Segment total heap used', 'Heap used [MB]', versions);
    charts.cpuUsage = chartingLib.renderBarChart('indexing_cpu_usage', 'Indexing CPU usage', 'CPU usage [%]', versions)
    charts.diskUsage = chartingLib.renderBarChart('disk_usage', 'Index disk usage', '[GB]', versions),
    charts.segmentCounts = chartingLib.renderBarChart('segment_counts', 'Index segment counts', 'Segment count', versions),
    charts.queryLatency = chartingLib.renderBarChart('search_latency_queries', 'Search Latency', '99th Percentile Latency [ms]', versions),
    charts.gcTimes = chartingLib.renderBarChart('gc_times', 'GC times', 'Total GC runtime [s]', versions)
  },

  toggleCompare: function(e) {
    if (e.checked) {
      this.compare();
    } else {
      this.showResults();
    }
  }
}

    </script>
</head>

<body>

<!-- Fixed navbar -->
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../index.html">Elasticsearch Nightly Benchmarks</a>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li><a href="../geonames/index.html">Geonames</a></li>
                <li><a href="../geopoint/index.html">Geopoint</a></li>
                <li><a href="../percolator/index.html">Percolator</a></li>
                <li><a href="../pmc/index.html">PMC</a></li>
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">NYC Taxis <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="#indexing_throughput">Indexing Throughput</a></li>
                        <li><a href="#indexing_total_times">Total times</a></li>
                        <li><a href="#segment_total_memory">Segment total heap used</a></li>
                        <!--<li><a href="#indexing_cpu_usage">Indexing CPU usage</a></li>-->
                        <li><a href="#disk_usage">Index disk usage</a></li>
                        <li><a href="#segment_counts">Index segment counts</a></li>
                        <li><a href="#search_latency_queries">Search Latency</a></li>
                        <li><a href="#search_latency_stats">Stats Latency</a></li>
                        <li><a href="#gc_times">GC times</a></li>
                    </ul>
                </li>
                <li><a href="../nested/index.html">Nested</a></li>
                <li><a href="../logging/index.html">Logging</a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-12">
            <h3>Overview</h3>
            <p>The NYC taxi data set contains the rides that have been performed in yellow taxis in New York in 2015 and have been provided
                by the <a href="http://www.nyc.gov/html/tlc/html/about/trip_record_data.shtml">NYC Taxi and Limousine Commission</a>. We use
                it to evaluate the performance of Elasticsearch for structured data. We run the following variation (which we call
                "challenge" in Rally):</p>
            <ul>
                <li><strong>Append</strong>: Indexes the whole document corpus using Elasticsearch default settings. We only adjust the
                    number of replicas as we benchmark a single node cluster and Rally will only start the benchmark if the cluster turns
                    green. Document ids are unique so all index operations are append only. After that a couple of queries are run in
                    parallel by multiple clients.
                </li>
                <li><strong>Append Sorted</strong>: Indexes the whole document corpus in an index sorted by pickup_datetime field in descending order (most recent first)
                    and using a setup that will lead to a larger indexing throughput than the default settings and produce a smaller index (higher compression rate).
                    Document ids are unique so all index operations are append only.
                </li>
            </ul>
            <p>The benchmarks are run either for an out of the box configuration of Elasticsearch but with a larger heap of 4GB. For more
                details please refer to the <a href="https://github.com/elastic/rally-tracks/blob/master/nyc_taxis/track.json">NYC taxis
                    track specification</a> and have a look at our <a href="../index.html">benchmarking methodology</a>).</p>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <h3>Results</h3>
            <div class="alert alert-success alert-dismissible" role="alert">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <strong>Hint</strong> Click and drag to zoom. Double-click to zoom out.
            </div>
            <div class="alert alert-success alert-dismissible" role="alert">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <strong>Hint</strong> Click a data point to see the diff between it and the previous race.
            </div>
            <div>
                <input type="checkbox" id="checkToggleCompare" onClick="charts.toggleCompare(this)">
                <label for="checkToggleCompare"> Show comparison across major versions</label>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- weird, dygraph needs label div *before* the graph in the DOM, otherwise it will not work -->
        <div class="col-md-2 col-md-push-10">
            <div id="chart_indexing_throughput_labels"></div>
        </div>
        <div class="col-md-10 col-md-pull-2">
            <a name="indexing_throughput" id="indexing_throughput"></a>
            <div id="chart_indexing_throughput" class="benchmark-chart"></div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-2 col-md-push-10">
            <div id="chart_indexing_total_times_labels"></div>
        </div>
        <div class="col-md-10 col-md-pull-2">
            <a name="indexing_total_times" id="indexing_total_times"></a>
            <div id="chart_indexing_total_times" class="benchmark-chart"></div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-2 col-md-push-10">
            <div id="chart_segment_total_memory_labels"></div>
        </div>
        <div class="col-md-10 col-md-pull-2">
            <a name="segment_total_memory" id="segment_total_memory"></a>
            <div id="chart_segment_total_memory" class="benchmark-chart"></div>
        </div>
    </div>

    <div class="row" style="display:none">
        <div class="col-md-2 col-md-push-10">
            <div id="chart_indexing_cpu_usage_labels"></div>
        </div>
        <div class="col-md-10 col-md-pull-2">
            <a name="indexing_cpu_usage" id="indexing_cpu_usage"></a>
            <div id="chart_indexing_cpu_usage" class="benchmark-chart"></div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-2 col-md-push-10">
            <div id="chart_disk_usage_labels"></div>
        </div>
        <div class="col-md-10 col-md-pull-2">
            <a name="disk_usage" id="disk_usage"></a>
            <div id="chart_disk_usage" class="benchmark-chart"></div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-2 col-md-push-10">
            <div id="chart_segment_counts_labels"></div>
        </div>
        <div class="col-md-10 col-md-pull-2">
            <a name="segment_counts" id="segment_counts"></a>
            <div id="chart_segment_counts" class="benchmark-chart"></div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-2 col-md-push-10">
            <div id="chart_search_latency_queries_labels"></div>
        </div>
        <div class="col-md-10 col-md-pull-2">
            <a name="search_latency_queries" id="search_latency_queries"></a>
            <div id="chart_search_latency_queries" class="benchmark-chart"></div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-2 col-md-push-10">
            <div id="chart_gc_times_labels"></div>
        </div>
        <div class="col-md-10 col-md-pull-2">
            <a name="gc_times" id="gc_times"></a>
            <div id="chart_gc_times" class="benchmark-chart"></div>
        </div>
    </div>

</div> <!-- /container -->


<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="../assets/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../assets/js/dygraph-combined.js"></script>
<script type="text/javascript" src="../assets/js/synchronizer.js"></script>
<script type="text/javascript" src="../assets/js/charts.js"></script>
<script>
  $(document).ready(charts.init);

</script>
</body>
</html>
