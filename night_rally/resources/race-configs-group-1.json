[
  {
    "track": "geonames",
    "placement": 1,
    "flavors": [
      {
        "name": "default",
        "licenses": [
          {
            "name": "basic",
            "configurations": [
              {
                "#COMMENT": "We need to start with a configuration where we build all candidates on all machines as we skip the build step afterwards",
                "name": "geonames-append-4g-3nodes",
                "label": "add-4g-3nodes",
                "charts": [
                  "indexing"
                ],
                "challenge": "append-no-conflicts-index-only",
                "track-params": {
                  "number_of_replicas": 1
                },
                "car": "4gheap",
                "node-count": 3,
                "on-error": "abort"
              },
              {
                "name": "geonames-append-defaults-1node",
                "label": "add-defaults",
                "charts": [
                  "indexing",
                  "query",
                  "gc",
                  "io",
                  "segment_memory"
                ],
                "challenge": "append-no-conflicts",
                "car": "defaults",
                "on-error": "abort"
              },
              {
                "name": "geonames-append-4g-1node",
                "label": "add-4g",
                "charts": [
                  "indexing"
                ],
                "challenge": "append-no-conflicts-index-only",
                "track-params": {
                  "number_of_replicas": 0
                },
                "car": "4gheap",
                "on-error": "abort"
              },
              {
                "name": "geonames-appendsorted-4g-1node",
                "label": "add-sorted-4g",
                "charts": [
                  "indexing"
                ],
                "challenge": "append-sorted-no-conflicts",
                "car": "4gheap",
                "on-error": "abort"
              },
              {
                "name": "geonames-update-4g-1node",
                "label": "update-4g",
                "charts": [
                  "indexing"
                ],
                "challenge": "append-fast-with-conflicts",
                "car": "4gheap",
                "on-error": "abort"
              }
            ]
          },
          {
            "name": "trial",
            "configurations": [
              {
                "name": "geonames-append-defaults-1node",
                "label": "add-defaults-security",
                "charts": [
                  "indexing",
                  "query"
                ],
                "challenge": "append-no-conflicts",
                "car": "defaults",
                "on-error": "abort",
                "x-pack": [
                  "security"
                ]
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "track": "geopoint",
    "placement": 0,
    "flavors": [
      {
        "name": "default",
        "licenses": [
          {
            "name": "basic",
            "configurations": [
              {
                "name": "geopoint-append-4g-3nodes",
                "label": "add-4g-3nodes",
                "charts": [
                  "indexing"
                ],
                "challenge": "append-no-conflicts-index-only",
                "track-params": {
                  "number_of_replicas": 1
                },
                "car": "4gheap",
                "node-count": 3
              },
              {
                "name": "geopoint-append-defaults-1node",
                "label": "add-defaults",
                "charts": [
                  "indexing",
                  "query",
                  "gc",
                  "io",
                  "segment_memory"
                ],
                "challenge": "append-no-conflicts",
                "car": "defaults"
              },
              {
                "name": "geopoint-append-4g-1node",
                "label": "add-4g",
                "charts": [
                  "indexing"
                ],
                "challenge": "append-no-conflicts-index-only",
                "track-params": {
                  "number_of_replicas": 0
                },
                "car": "4gheap"
              },
              {
                "name": "geopoint-append-4g-1node-with-jfr",
                "label": "add-4g-jfr",
                "charts": [
                  "indexing"
                ],
                "challenge": "append-no-conflicts-index-only",
                "track-params": {
                  "number_of_replicas": 0
                },
                "car": "4gheap",
                "car-params": {
                  "additional_java_settings": [
                    "-XX:+UnlockDiagnosticVMOptions",
                    "-XX:+DebugNonSafepoints",
                    "-XX:FlightRecorderOptions=memorysize=256M",
                    "-XX:StartFlightRecording=disk=true,name=elasticsearch-continuous,maxsize=256M",
                    "-XX:+StartAttachListener"
                  ]
                }
              },
              {
                "name": "geopoint-update-4g-1node",
                "label": "update-4g",
                "charts": [
                  "indexing"
                ],
                "challenge": "append-fast-with-conflicts",
                "car": "4gheap"
              }
            ]
          },
          {
            "name": "trial",
            "configurations": [
              {
                "name": "geopoint-append-defaults-1node",
                "label": "add-defaults-security",
                "charts": [
                  "indexing",
                  "query"
                ],
                "challenge": "append-no-conflicts",
                "car": "defaults",
                "x-pack": [
                  "security"
                ]
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "track": "percolator",
    "placement": 0,
    "flavors": [
      {
        "name": "default",
        "licenses": [
          {
            "name": "basic",
            "configurations": [
              {
                "name": "percolator-append-4g-1node",
                "label": "add-4g",
                "charts": [
                  "query",
                  "gc",
                  "io",
                  "segment_memory"
                ],
                "challenge": "append-no-conflicts",
                "car": "4gheap"
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "track": "nyc_taxis",
    "placement": 2,
    "flavors": [
      {
        "name": "default",
        "licenses": [
          {
            "name": "basic",
            "configurations": [
              {
                "name": "nyc_taxis-append-4g-3nodes",
                "label": "add-4g-3nodes",
                "charts": [
                  "indexing"
                ],
                "challenge": "append-no-conflicts-index-only",
                "#COMMENT": "We need to be a bit more explicit here because nyc_taxis sets a bunch of other index settings as well which we don't want",
                "track-params": {
                  "index_settings": {
                    "index.number_of_replicas": 1,
                    "index.number_of_shards": 5
                  }
                },
                "car": "4gheap",
                "node-count": 3,
                "exclude-tasks": "force-merge,refresh-after-force-merge"
              },
              {
                "name": "nyc_taxis-append-4g-1node",
                "label": "add-4g",
                "charts": [
                  "indexing",
                  "query",
                  "gc",
                  "io",
                  "segment_memory"
                ],
                "challenge": "append-no-conflicts",
                "car": "4gheap",
                "exclude-tasks": "force-merge,refresh-after-force-merge"
              },
              {
                "name": "nyc_taxis-appendsorted-4g-1node",
                "label": "add-sorted-4g",
                "charts": [
                  "indexing"
                ],
                "challenge": "append-sorted-no-conflicts-index-only",
                "track-params": {
                  "number_of_replicas": 0
                },
                "car": "4gheap",
                "exclude-tasks": "force-merge,refresh-after-force-merge"
              }
            ]
          },
          {
            "name": "trial",
            "configurations": [
              {
                "name": "nyc_taxis-append-4g-3nodes",
                "label": "add-4g-security-3nodes",
                "charts": [
                  "indexing"
                ],
                "challenge": "append-no-conflicts-index-only",
                "#COMMENT": "We need to be a bit more explicit here because nyc_taxis sets a bunch of other index settings as well which we don't want",
                "track-params": {
                  "index_settings": {
                    "index.number_of_replicas": 1,
                    "index.number_of_shards": 5
                  }
                },
                "car": "4gheap",
                "x-pack": [
                  "security"
                ],
                "node-count": 3,
                "exclude-tasks": "force-merge,refresh-after-force-merge"
              },
              {
                "name": "nyc_taxis-append-4g-1node",
                "label": "add-4g-security",
                "charts": [
                  "indexing",
                  "query"
                ],
                "challenge": "append-no-conflicts",
                "car": "4gheap",
                "x-pack": [
                  "security"
                ],
                "exclude-tasks": "force-merge,refresh-after-force-merge"
              },
              {
                "name": "nyc_taxis-ml-4g-1node",
                "label": "ml-4g",
                "#COMMENT": "Don't generate any standard charts but we'll create ML-specific charts",
                "charts": [],
                "challenge": "append-ml",
                "car": "4gheap",
                "x-pack": [
                  "ml"
                ],
                "track-params": {
                   "ingest_percentage": 30
                }
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "track": "eql",
    "placement": 1,
    "flavors": [
      {
        "name": "default",
        "licenses": [
          {
            "name": "basic",
            "configurations": [
              {
                "name": "eql-16g-1node",
                "label": "add-16g",
                "charts": [
                  "query",
                  "gc"
                ],
                "challenge": "default",
                "car": "16gheap",
                "plugins": "mapper-size"
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "track": "observability/logs",
    "placement": 0,
    "track-repository": "internal",
    "flavors": [
      {
        "name": "default",
        "licenses": [
          {
            "name": "basic",
            "configurations": [
              {
                "name": "observability-8g-1node",
                "label": "add-8g",
                "challenge": "logging-indexing",
                "car": "8gheap",
                "track-params": {
                  "raw_data_volume_per_day": "3.5GB",
                  "max_generated_corpus_size": "30GB",
                  "force_data_generation": true,
                  "max_total_download_gb": 40,
                  "corpora_uri_base":"gs://rally-internal-tracks",
                  "number_of_replicas": 0,
                  "wait_for_status": "green",
                  "corpus_ratios": {
                    "application-logs-1": 0.5,
                    "application-logs-2": 0.25,
                    "system-syslog-logs": 0.05,
                    "system-auth-logs": 0.025,
                    "nginx-access-logs": 0.025,
                    "nginx-access-logs-2": 0.025,
                    "nginx-error-logs": 0.01,
                    "nginx-error-logs-2": 0.01,
                    "apache-access-logs": 0.025,
                    "apache-error-logs": 0.01,
                    "mysql-slowlog-logs": 0.025,
                    "mysql-error-logs": 0.01,
                    "kafka-logs": 0.025,
                    "redis-app-logs": 0.01
                  },
                  "exclude_properties": {
                    "kafka-logs": ["container"],
                    "nginx-access-logs": ["container"],
                    "nginx-access-logs-2": ["container"],
                    "nginx-error-logs": ["container"],
                    "nginx-error-logs-2": ["container"],
                    "application-logs-1": ["kubernetes"],
                    "application-logs-2": ["kubernetes"],
                    "mysql-error-logs": ["container"],
                    "mysql-slowlog-logs": ["container"],
                    "system-auth-logs": [],
                    "system-syslog-logs": [],
                    "system-auth-logs-2": [],
                    "system-syslog-logs-2": [],
                    "postgresql-logs": ["container"],
                    "apache-access-logs": ["container"],
                    "apache-error-logs": ["container"],
                    "redis-app-logs": ["container"],
                    "redis-app-slowlogs": ["container"]
                  }
                },
                "charts": [
                  "indexing",
                  "gc",
                  "io",
                  "segment_memory",
                  "merge_count",
                  "merge_times"
                ]
              }
            ]
          }
        ]
      }
    ]
  }
]
